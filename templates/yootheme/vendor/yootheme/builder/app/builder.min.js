(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(t,e){t.exports=UIkit.util},211:function(t,e,i){"use strict";i.r(e);var a=i(2),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{on:{submit:function(e){return e.preventDefault(),t.$emit("resolve",t.node)}}},[i("div",{staticClass:"uk-modal-header"},[i("h2",{staticClass:"uk-modal-title"},[t._v(t._s(t.edit?t.$t("Edit %type%",{type:t.title}):t.$t("Save %type%",{type:t.title})))])]),t._v(" "),i("div",{staticClass:"uk-modal-body uk-form-stacked"},[i("label",{staticClass:"uk-form-label",attrs:{for:"form-element-save-name"}},[t._v(t._s(t.$t("Name")))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.node.name,expression:"node.name"}],staticClass:"uk-input",attrs:{id:"form-element-save-name",placeholder:t.type.title,type:"text",required:"",autofocus:""},domProps:{value:t.node.name},on:{input:function(e){e.target.composing||t.$set(t.node,"name",e.target.value)}}}),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.edit&&t.exists,expression:"!edit && exists"}],staticClass:"uk-text-muted uk-margin-small"},[t._v(t._s(t.$t('"%name%" already exists in library, it will be overwritten when saving.',{name:t.node.name})))])]),t._v(" "),i("div",{staticClass:"uk-modal-footer uk-text-right"},[i("button",{staticClass:"uk-button uk-button-text uk-modal-close uk-margin-small-right",attrs:{type:"button"}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),i("button",{staticClass:"uk-button uk-button-primary"},[t._v(t._s(t.$t("Save")))])])])};n._withStripped=!0;var r={name:"ElementModal",inject:["Library"],props:{edit:{type:Boolean,default:!1},node:{type:Object,required:!0},builder:{type:Object,required:!0}},computed:{type:function(){return this.builder.type(this.node)},title:function(){return this.type.element?"Element":this.type.title||this.node.type},exists:function(){return"layout"===this.node.type&&this.Library.findElement(this.node.name,this.node.type)}},created:function(){this.edit||(this.node.name="")}},o=i(0),s=Object(o.a)(r,n,[],!1,null,null,null);s.options.__file="node_modules/yootheme/packages/builder/src/components/ElementModal.vue";var l=s.exports,u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Switcher",{attrs:{tabs:["pro layouts","my layouts"],storage:"builder.library.tab"},on:{show:t.show}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!t.builder.empty,expression:"!builder.empty"}],staticClass:"uk-button uk-button-primary",attrs:{slot:"header-right",type:"button"},on:{click:function(e){return t.$trigger("saveNode",[t.builder.node,t.builder],!0)}},slot:"header-right"},[t._v(t._s(t.$t("Save Layout")))]),t._v(" "),i("div",{staticClass:"uk-modal-body",attrs:{slot:"pro layouts","uk-overflow-auto":""},slot:"pro layouts"},[i("Layouts",{attrs:{library:t.Library},on:{load:t.load,select:t.select}})],1),t._v(" "),i("div",{staticClass:"uk-modal-body",attrs:{slot:"my layouts","uk-overflow-auto":""},slot:"my layouts"},[t.isEmpty(t.Library.layouts)?i("p",{staticClass:"uk-h1 uk-text-muted uk-text-center"},[t._v(t._s(t.$t("No layout found.")))]):i("table",{staticClass:"uk-table uk-table-divider uk-table-small uk-table-hover"},[i("thead",[i("tr",[i("th",{staticClass:"uk-table-expand"},[t._v(t._s(t.$t("Name")))]),t._v(" "),i("th",{staticClass:"uk-width-medium"},[t._v(t._s(t.$t("Type")))]),t._v(" "),i("th",{staticClass:"uk-table-shrink"})])]),t._v(" "),i("tbody",t._l(t.orderBy(t.Library.layouts,"name"),function(e){return i("tr",{staticClass:"uk-visible-toggle",attrs:{tabindex:"-1"}},[i("td",{staticClass:"uk-table-link"},[i("a",{staticClass:"uk-link-heading",on:{click:function(i){return t.select(e)}}},[i("span",{staticClass:"uk-preserve-width uk-margin-small-right",attrs:{"uk-icon":"layout"==e.type?"copy":"file"}}),t._v(" "),i("span",{staticClass:"uk-text-middle"},[t._v(t._s(e.name))])])]),t._v(" "),i("td",[t._v(t._s(t.startCase(e.type)))]),t._v(" "),i("td",[i("ul",{staticClass:"uk-iconnav uk-flex-nowrap uk-invisible-hover"},[i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:t.$t("Edit"),"uk-icon":"pencil","uk-tooltip":"delay: 500"},on:{click:function(i){return t.Library.editElement(e,t.builder)}}})]),t._v(" "),i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:t.$t("Delete"),"uk-icon":"trash","uk-tooltip":"delay: 500"},on:{click:function(i){return t.Library.deleteElement(e,t.builder)}}})])])])])}),0)])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.builder.empty,expression:"!builder.empty"}],staticClass:"uk-modal-footer"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.replace,expression:"replace"}],staticClass:"uk-select uk-form-width-medium yo-form-medium",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.replace=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"replace"}},[t._v(t._s(t.$t("Replace layout")))]),t._v(" "),i("option",{attrs:{value:"prepend"}},[t._v(t._s(t.$t("Insert at the top")))]),t._v(" "),i("option",{attrs:{value:"append"}},[t._v(t._s(t.$t("Insert at the bottom")))])])])],1)};u._withStripped=!0;var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"uk-grid-small uk-child-width-auto",attrs:{"uk-grid":""}},[t.options("layout")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.layout,expression:"filter.layout"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filter,"layout",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v(t._s(t.$t("All layouts")))]),t._v(" "),t._l(t.options("layout"),function(e){var a=e.value,n=e.text;return i("option",{key:a,domProps:{value:a}},[t._v(t._s(n))])})],2)]):t._e(),t._v(" "),t.options("topic")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.topic,expression:"filter.topic"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filter,"topic",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v(t._s(t.$t("All topics")))]),t._v(" "),t._l(t.options("topic"),function(e){var a=e.value,n=e.text;return i("option",{key:a,domProps:{value:a}},[t._v(t._s(n))])})],2)]):t._e(),t._v(" "),t.options("type")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.type,expression:"filter.type"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filter,"type",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v(t._s(t.$t("All types")))]),t._v(" "),t._l(t.options("type"),function(e){var a=e.value,n=e.text;return i("option",{key:a,domProps:{value:a}},[t._v(t._s(n))])})],2)]):t._e(),t._v(" "),t.options("website")?i("div",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.website,expression:"filter.website"}],staticClass:"uk-select uk-form-width-medium",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filter,"website",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v(t._s(t.$t("All websites")))]),t._v(" "),t._l(t.options("website"),function(e){var a=e.value,n=e.text;return i("option",{key:a,domProps:{value:a}},[t._v(t._s(n))])})],2)]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.some(t.filter),expression:"some(filter)"}]},[i("button",{staticClass:"uk-button uk-button-default",attrs:{type:"button"},on:{click:function(e){t.filter=t.reset()}}},[t._v(t._s(t.$t("Reset")))])])]),t._v(" "),i("ul",{class:["uk-grid uk-grid-medium uk-child-width-1-2",{"uk-grid-match uk-child-width-1-3@s uk-child-width-1-4@m":!t.isFooter}],attrs:{"uk-grid":"masonry: "+t.isFooter}},t._l(t.filtered,function(e){return i("li",{key:e.link},[i("div",{staticClass:"uk-panel uk-box-shadow-medium uk-box-shadow-hover-large uk-transition-toggle",attrs:{tabindex:"0"}},[t.isFooter?i("img",{attrs:{"data-src":t.$url(e.meta.image),"uk-img":""}}):[e.meta.image?i("div",{directives:[{name:"lazy-background",rawName:"v-lazy-background",value:{src:t.$url(e.meta.image)},expression:"{src: $url(layout.meta.image)}"}],staticClass:"uk-background-cover uk-background-top-center uk-position-cover"}):i("div",{staticClass:"uk-background-cover uk-position-cover yo-finder-thumbnail-file"}),t._v(" "),i("canvas",{attrs:{width:"800",height:"1000"}})],t._v(" "),i("div",{staticClass:"uk-label yo-label uk-position-top-right uk-position-small uk-transition-fade"},[t._v(t._s(t.filter.layout?e.meta.topic+" / "+e.meta.type:e.meta.layout))]),t._v(" "),t.loading===e?i("div",{staticClass:"uk-overlay uk-overlay-primary uk-position-cover uk-flex uk-flex-center uk-flex-middle"},[t.error?i("div",{staticClass:"uk-text-danger"},[i("span",{attrs:{"uk-icon":"warning"}}),t._v(" "),i("span",{staticClass:"uk-margin-small-left"},[t._v(t._s(t.$t(t.error)))])]):i("span",{attrs:{"uk-spinner":""}})]):t._e(),t._v(" "),i("a",{staticClass:"uk-position-cover",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.select(e)}}})],2)])}),0)])};c._withStripped=!0;var d=i(112),p=i(23),v=i(254),m=i(259),h=i(235),f=i(223),y=i(236),b="builder.layouts.filter",k={directives:{LazyBackground:d.a},props:{library:{type:Object,required:!0}},data:function(t){var e=t.reset;return{error:"",loading:null,layouts:[],filter:p.i[b]?JSON.parse(p.i[b]):e()}},computed:{filtered:function(){var t=this;return this.layouts.filter(function(e){var i=e.meta;return Object(v.a)(t.filter,function(t,e){return!t||i[e]===t})&&(t.isFooter||"Footer"!==i.layout)})},isFooter:function(){return"Footer"===this.filter.layout}},watch:{filter:{handler:function(t){p.i[b]=JSON.stringify(t)},deep:!0}},created:function(){var t=this;this.library.getLayouts().then(function(e){return t.$emit("load",t.layouts=e)})},methods:{some:m.a,reset:function(){return{layout:"",type:"",topic:"",website:""}},select:function(t){var e=this;this.error="",this.loading=t,this.library.getLayout(t).then(function(t){return e.$emit("select",t)},function(t){var i=t.data;return e.error=i})},options:function(t){var e=Object(h.a)(this.layouts.filter(function(e){return e.meta[t]}),function(e){return e.meta[t]});return(e=Object(f.a)(e,function(t,e){return{value:e,text:e.replace(/\b\w/g,function(t){return t.toUpperCase()})}})).length?Object(y.a)(e,"text"):null}}},g=Object(o.a)(k,c,[],!1,null,null,null);g.options.__file="node_modules/yootheme/packages/builder/src/components/Layouts.vue";var _=g.exports,w=i(155),$=i(229),C=i(240),x=i(250),O={name:"LayoutsModal",components:{Layouts:_,Switcher:w.a},inject:["Library","Modal"],props:{builder:{type:Object,required:!0}},data:function(){return{layouts:[],replace:p.i["builder.library.replace"]||"replace"}},methods:{isEmpty:$.a,orderBy:C.a,startCase:x.a,show:function(t,e){this.Modal.width=0!==e?"xxlarge":"",this.Modal.container=0===e},load:function(t){this.layouts=t},select:function(t){p.i["builder.library.replace"]=this.replace,this.Modal.resolve({node:t,replace:this.replace})}}},j=Object(o.a)(O,u,[],!1,null,null,null);j.options.__file="node_modules/yootheme/packages/builder/src/components/LayoutsModal.vue";var B=j.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Switcher",{attrs:{tabs:["new","my elements"]}},[i("div",{staticClass:"uk-modal-body uk-grid-collapse uk-child-width-1-6",attrs:{slot:"new","uk-grid":""},slot:"new"},t._l(t.orderBy(t.filter(t.builder.types,{element:!0}),"name"),function(e){var a=e.name,n=e.title,r=e.icon;return i("div",{key:a},[i("div",{staticClass:"uk-card uk-card-body uk-card-hover yo-panel uk-padding-remove-horizontal uk-text-center"},[i("img",{staticClass:"uk-svg",attrs:{alt:n,src:r,"uk-svg":""}}),t._v(" "),i("p",{staticClass:"uk-margin-small-top uk-margin-remove-bottom uk-text-truncate"},[t._v(t._s(n))]),t._v(" "),i("a",{staticClass:"uk-position-cover",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.$emit("resolve",t.builder.make(a))}}})])])}),0),t._v(" "),i("div",{staticClass:"uk-modal-body",attrs:{slot:"my elements"},slot:"my elements"},[t.isEmpty(t.Library.elements)?i("p",{staticClass:"uk-h1 uk-text-muted uk-text-center"},[t._v(t._s(t.$t("No elements found.")))]):i("table",{staticClass:"uk-table uk-table-divider uk-table-small uk-table-hover"},[i("thead",[i("tr",[i("th",{staticClass:"uk-table-expand"},[t._v(t._s(t.$t("Name")))]),t._v(" "),i("th",{staticClass:"uk-width-medium"},[t._v(t._s(t.$t("Type")))]),t._v(" "),i("th",{staticClass:"uk-table-shrink"})])]),t._v(" "),i("tbody",t._l(t.orderBy(t.Library.elements,"name"),function(e,a){return i("tr",{key:a,staticClass:"uk-visible-toggle",attrs:{tabindex:"-1"}},[i("td",{staticClass:"uk-table-link"},[i("a",{staticClass:"uk-link-reset",attrs:{href:""},on:{click:function(i){i.preventDefault(),t.$emit("resolve",t.builder.clone(e))}}},[i("img",{staticClass:"uk-text-muted uk-preserve-width uk-margin-small-right",attrs:{alt:e.name,src:t.type(e).iconSmall,"uk-svg":""}}),t._v("\n                            "+t._s(e.name)+"\n                        ")])]),t._v(" "),i("td",[t._v(t._s(t.type(e).title))]),t._v(" "),i("td",[i("ul",{staticClass:"uk-iconnav uk-flex-nowrap uk-invisible-hover"},[i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:t.$t("Edit"),href:"","uk-icon":"pencil","uk-tooltip":"delay: 500"},on:{click:function(i){return i.preventDefault(),t.Library.editElement(e,t.builder)}}})]),t._v(" "),i("li",[i("a",{staticClass:"uk-icon-link uk-preserve-width",attrs:{title:t.$t("Delete"),href:"","uk-icon":"trash","uk-tooltip":"delay: 500"},on:{click:function(i){return i.preventDefault(),t.Library.deleteElement(e,t.builder)}}})])])])])}),0)])])])};N._withStripped=!0;var L=i(258),E={name:"ElementsModal",components:{Switcher:w.a},inject:["Library"],props:{builder:{type:Object,required:!0}},methods:{filter:L.a,isEmpty:$.a,orderBy:C.a,type:function(t){return this.builder.type(t)||{}}}},P=Object(o.a)(E,N,[],!1,null,null,null);P.options.__file="node_modules/yootheme/packages/builder/src/components/ElementsModal.vue";var S=P.exports,D=i(238),M=i(255),A=i(139),F=i(9),T=i(60),q=i(130),z=i(231),I=i(8),J=i(77);var R=function(t,e){return t&&t.length?Object(J.a)(t,Object(I.a)(e,2)):[]};function U(){return(U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var H={name:"LibraryModel",data:function(){return{library:{}}},computed:{layouts:function(){return Object(D.a)(this.library,function(t){var e=t.type;return["layout","section"].indexOf(e)>=0})},elements:function(){return Object(D.a)(this.library,function(t){var e=t.type;return["layout","section"].indexOf(e)<0})}},config:function(t){return t},created:function(){this.$trigger("initLibrary",this.library)},methods:{getLayout:function(t){var e=t.link;return this.$http.get(e,{params:{key:this.$config.apikey}}).then(function(t){return t.json()})},getLayouts:function(){return this.$http.get(this.$config.api+"/layout").then(function(t){return t.json()})},findElement:function(t,e){return Object(M.a)(this.library,{name:t,type:e})},saveElement:function(t,e){var i=this;return void 0===e&&(e=Object(p.j)()),this.$trigger("saveElement",[t,e],!0).then(function(){return i.$set(i.library,e,t),t})},deleteElement:function(t,e){var i=this;return this.$trigger("deleteElement",[t,this.findElement(t.name,t.type)],!0).then(function(){return i.library=Object(D.a)(i.library,function(e){return e!==t}),t})},editElement:function(t,e){var i=this;return this.$modal(l,{node:e.clone(t),builder:e,edit:!0}).show({width:"xlarge"}).then(function(e){return e?i.saveElement(e,i.findElement(t.name,t.type)):e})}},events:{openLibrary:function(t,e){var i=this;return this.$modal(B,{builder:e}).show({width:"xxlarge"}).then(function(t){var a=void 0===t?{}:t,n=a.node,r=a.replace;if(n&&("replace"!==r||!e.modified||e.empty||confirm(i.$t("Do you really want to replace the current layout?")))){var o=n=e.clone(n),s=o.type,l=o.images;switch(r){case"replace":e.set("layout"===s?n:{type:"layout",children:[n]});break;case"append":e.append(e.node,"layout"===s?n.children:n);break;case"prepend":e.append(e.node,"layout"===s?n.children:n,0)}return l&&function t(e,i){return Object(A.a)(e,function(a,n){if(Object(F.a)(a)&&!Object(T.a)(a))t(a,i);else if(Object(q.a)(a)){var r=i.filter(function(t){return Object(z.a)(a,t.src)});r.length&&(e[n]=new p.b(a,{source:R(r.map(function(t){return U({},t)}),"src")}))}})}(n,l),n}})},addNode:function(t,e,i){return this.$modal(S,{builder:i}).show({width:"xxlarge"})},saveNode:function(t,e,i){var a=this;return this.$modal(l,{node:i.clone(e),builder:i}).show({width:"xlarge"}).then(function(t){return t?a.saveElement(t,"layout"===t.type?a.findElement(t.name,t.type):void 0):t})}}};function V(){return(V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var Y={extends:H,data:function(){return{library:V({},window.$builder.library)}},methods:{getLayout:function(t){var e=this,i=t.link;return H.methods.getLayout.call(this,{link:i}).then(function(t){return e.$http.post("builder/encode",{layout:t}).then(function(t){return t.json()})})}},events:{saveElement:function(t,e,i){return e.version=this.$config.version,this.$http.post("builder/library",{id:i,element:e})},deleteElement:function(t,e,i){return this.$http.delete("builder/library",{params:{id:i}})}}},Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between uk-margin-medium"},[i("h2",{staticClass:"yo-sidebar-heading uk-margin-remove-bottom"},[t._v(t._s(t.$t("Footer")))]),t._v(" "),i("button",{staticClass:"uk-button uk-button-small uk-button-default",attrs:{type:"button"},on:{click:function(e){return t.$trigger("openLibrary",t.Builder)}}},[t._v(t._s(t.$t("Library")))])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.Builder.empty,expression:"Builder.empty"}],staticClass:"uk-text-muted"},[t._v(t._s(t.$t("Create a new page layout from a collection of ready-to-use elements. Or browse the layout library and choose one of the pre-built layouts as a starting point. You can also save your own layouts into the Layout Library and reuse them later.")))]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.Builder.empty,expression:"Builder.empty"}],staticClass:"uk-button uk-button-default uk-width-1-1",attrs:{type:"button"},on:{click:t.empty}},[t._v(t._s(t.$t("New Layout")))]),t._v(" "),i("Layout",{attrs:{node:t.Builder.node}})],1)};Z._withStripped=!0;var G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.node?i("div",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{directives:[{name:"position",rawName:"v-position:top",value:t.target,expression:"target",arg:"top"}],staticClass:"uk-position-absolute uk-flex uk-flex-middle uk-position-absolute",class:"yo-builder-nav-"+t.type,on:{mouseenter:t.enter,mouseleave:t.leave}},[i("ul",{staticClass:"yo-iconnav"},[i("li",[i("a",{staticClass:"yo-builder-icon-edit",attrs:{title:t.$t("Edit"),href:"","uk-icon":"pencil"},on:{click:t.editNode}})]),t._v(" "),i("li",[i("a",{staticClass:"yo-builder-icon-copy",attrs:{title:t.$t("Copy"),href:"","uk-icon":"copy"},on:{click:function(e){return t.Builder.copy(t.node)}}})]),t._v(" "),"element"===t.type?i("li",[i("a",{staticClass:"yo-builder-icon-save",attrs:{title:t.$t("Save in library"),href:"","uk-icon":"push"},on:{click:function(e){return t.Builder.save(t.node)}}})]):t._e(),t._v(" "),i("li",[i("a",{staticClass:"yo-builder-icon-delete",attrs:{title:t.$t("Delete"),href:"","uk-icon":"trash"},on:{click:function(e){return t.Builder.remove(t.node)}}})])])]),t._v(" "),i("a",{directives:[{name:"position",rawName:"v-position:bottom",value:t.target,expression:"target",arg:"bottom"}],staticClass:"uk-position-absolute uk-icon-button yo-builder-icon-add",class:"yo-builder-button-"+t.type,attrs:{title:t.$t("Add"),href:"","uk-icon":"plus"},on:{click:function(e){return t.Builder.add(t.node)},mouseenter:t.enter,mouseleave:t.leave}})]):t._e()};G._withStripped=!0;var K=i(106),Q=i(1);function W(t,e){var i=e.value,a=e.arg;requestAnimationFrame(function(){return i.ownerDocument.defaultView&&Object(Q.positionAt)(t,i,"center "+("top"===a?"bottom":i.offsetHeight<10?"top":"center"),"center "+a)})}function X(t){return function(e){if(e.target===e.currentTarget||e.target===e.current)return t.call(null,e)}}var tt={name:"Toolbar",directives:{position:{inserted:W,update:W}},inject:["Builder","Sidebar"],props:{panel:Object,type:{type:String,default:"element"}},data:function(t){var e=t.panel;return{active:t.Sidebar.panel===e,target:null}},computed:{id:function(){return(Object(Q.attr)(this.target,"data-id")||"").replace(this.Builder.prefix,"")},node:function(){var t=this.Builder.ids[this.id],e=this.Builder.type(t).element;return this.active&&e&&t}},watch:{node:function(t,e){this.active&&(e&&this.$trigger("leavePreviewNode",e),t&&this.$trigger("hoverPreviewNode",t))}},mounted:function(){this.attach()},destroyed:function(){this.off&&this.off.forEach(function(t){return t()})},methods:{attach:function(){var t=Object(K.a)(Object(Q.$$)('iframe[name*="preview-"]'));if(t){var e=t.contentDocument,i=e.body,a=e.documentElement;Object(Q.append)(i,this.$el),this.off=[Object(Q.on)(a,"mouseenter",'[data-id^="'+this.Builder.prefix+'"]',X(this.enter),!0),Object(Q.on)(a,"mouseleave",'[data-id^="'+this.Builder.prefix+'"]',X(this.leave),!0)]}},enter:function(t){var e=t.target;this.target=this.node&&this.$el.contains(e)?this.target:e,cancelAnimationFrame(this.frame)},leave:function(){var t=this;cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(function(){return t.target=!1})},editNode:function(){for(;this.Sidebar.panel!==this.panel;)this.Sidebar.stack.pop();this.$trigger("editNode",[this.node,this.Builder])}},events:{openPanel:function(t,e){this.active=this.active||this.panel===e},closePanel:function(t,e,i){!1!==(void 0===e?{}:e).close&&this.panel===i&&(this.active=!1)},readyPreview:function(){this.attach()}}},et=Object(o.a)(tt,G,[],!1,null,null,null);et.options.__file="node_modules/yootheme/modules/builder/app/components/Toolbar.vue";var it=et.exports,at={props:{panel:Object},mounted:function(){var t=new a.a({parent:this,extends:it,propsData:{panel:this.panel}}).$mount();this.$on("hook:beforeDestroy",function(){return t.$destroy()})},events:{hoverPreviewNode:function(t,e){Object(Q.addClass)(nt(this,e),"yo-hover")},leavePreviewNode:function(t,e){Object(Q.removeClass)(nt(this,e),"yo-hover")}}};function nt(t,e){var i=t.$el,a=t.node,n=t.$children;return a===e?i:!!n&&n.map(function(t){return nt(t,e)}).filter(function(t){return t})[0]}var rt=i(246),ot=i(261);function st(){return(st=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var lt={components:{Layout:rt.a},models:{Builder:ot.a},inject:["Config"],mixins:[at],props:{panel:Object},watch:{"Config.values":function(t){var e=t.footer,i=(e=void 0===e?{}:e).content;this.Builder.reset(i||{})}},created:function(){var t=this.Config.values.footer,e=(t=void 0===t?{}:t).content;this.Builder.prefix="footer#",this.Builder.reset(e||{}),this.Builder.$on("change",this.change)},methods:{change:function(t){this.Config.values.footer||this.$set(this.Config.values,"footer",{}),this.$set(this.Config.values.footer,"content",t),this.Config.change(t,{name:"footer.content"})},empty:function(){this.Builder.set(st({},this.Builder.make("layout"),{children:[this.Builder.make("section")]}))}}},ut=Object(o.a)(lt,Z,[],!1,null,null,null);ut.options.__file="node_modules/yootheme/modules/builder/app/components/BuilderFooter.vue";var ct=ut.exports,dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"uk-flex uk-flex-middle uk-flex-between uk-margin-medium"},[i("h2",{staticClass:"yo-sidebar-heading uk-margin-remove-bottom"},[t._v(t._s(t.$t("Builder")))]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.page.id,expression:"page.id"}],staticClass:"uk-button uk-button-small uk-button-default",attrs:{type:"button"},on:{click:function(e){return t.$trigger("openLibrary",t.Builder)}}},[t._v(t._s(t.$t("Library")))])]),t._v(" "),i("h2",{directives:[{name:"show",rawName:"v-show",value:!t.Builder.empty,expression:"!Builder.empty"}],staticClass:"uk-h1 uk-text-truncate"},[t._v(t._s(t.page.title))]),t._v(" "),i("Layout",{attrs:{node:t.Builder.node}}),t._v(" "),i("Savebar",{directives:[{name:"show",rawName:"v-show",value:t.Builder.modified,expression:"Builder.modified"}],on:{cancel:t.cancel,save:t.save}}),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.page.id,expression:"!page.id"}]},[t._v(t._s(t.$t("Not available on this page. The builder can only be used on static pages. It does not work on blogs, shops or other dynamically generated content.")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.page.id&&t.Builder.empty,expression:"page.id && Builder.empty"}],staticClass:"uk-text-muted"},[t._v(t._s(t.$t("Create a new page layout from a collection of ready-to-use elements. Or browse the layout library and choose one of the pre-built layouts as a starting point. You can also save your own layouts into the Layout Library and reuse them later.")))]),t._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:t.page.id&&t.Builder.empty,expression:"page.id && Builder.empty"}],staticClass:"uk-button uk-button-default uk-width-1-1 uk-margin-top",attrs:{type:"button"},on:{click:t.empty}},[t._v(t._s(t.$t("New Layout")))]),t._v(" "),i("Notifications",{ref:"notifications",attrs:{page:t.page},on:{cancel:t.cancel}})],1)};dt._withStripped=!0;var pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"uk-notification uk-notification-top-center"},[i("Transition",{attrs:{"enter-active-class":"uk-animation-slide-top","leave-active-class":"uk-animation-slide-top uk-animation-reverse"}},[t.visible?i("div",{staticClass:"uk-notification-message",on:{click:function(e){return t.dismiss()}}},[i("button",{staticClass:"uk-notification-close",attrs:{"uk-icon":"close"}}),t._v(" "),i("div",[t._v(t._s(t.$t("The page has been updated by %modifiedBy%. Discard your changes and reload?",t.page.collision)))]),t._v(" "),i("button",{staticClass:"uk-button uk-button-small uk-button-primary uk-margin-small-top",attrs:{type:"button"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(t._s(t.$t("Reload Page")))])]):t._e()])],1)};pt._withStripped=!0;var vt=i(7),mt=i.n(vt),ht={props:{page:{type:Object,default:function(){return{}}}},data:function(){return{dismissed:!1}},computed:{visible:function(){var t=this.page.collision,e=(t=void 0===t?{}:t).modifiedDate;return e&&e>this.page.modifiedDate&&(!this.dismissed||e>this.dismissed)}},watch:{"page.id":function(){this.dismissed=!1}},mounted:function(){Object(Q.append)(mt.a.container,this.$el)},methods:{dismiss:function(){this.dismissed=this.page.collision.modifiedDate}}},ft=Object(o.a)(ht,pt,[],!1,null,null,null);ft.options.__file="node_modules/yootheme/modules/builder/app/components/Notifications.vue";var yt=ft.exports,bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),t._v(" "),i("div",{staticClass:"uk-modal-header"},[i("h2",{staticClass:"uk-modal-title"},[t._v(t._s(t.$t("Attention! Page has been updated.")))])]),t._v(" "),i("div",{staticClass:"uk-modal-body"},[i("p",[t._v(t._s(t.$t("The page your are currently editing has been updated by %modified_by%. Saving your changes will overwrite the previous changes. Do you want to save anyway or discard your changes and reload the page?",t.collision)))])]),t._v(" "),i("div",{staticClass:"uk-modal-footer uk-text-right"},[i("div",{staticClass:"uk-grid uk-grid-small uk-child-width-auto uk-flex-inline"},[i("div",[i("button",{staticClass:"uk-button uk-button-default uk-modal-close",attrs:{type:"button"},on:{click:function(e){return t.$emit("resolve",!1)}}},[t._v(t._s(t.$t("Discard")))])]),t._v(" "),i("div",[i("button",{staticClass:"uk-button uk-button-primary",attrs:{autofocus:""},on:{click:function(e){return t.$emit("resolve",!0)}}},[t._v(t._s(t.$t("Save")))])])])])])};bt._withStripped=!0;var kt={props:{collision:Object}},gt=Object(o.a)(kt,bt,[],!1,null,null,null);gt.options.__file="node_modules/yootheme/modules/builder/app/components/SaveConfirmModal.vue";var _t=gt.exports,wt=i(252);function $t(){return($t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var Ct={name:"BuilderSection",components:{Layout:rt.a,Notifications:yt,Savebar:wt.a},models:{Builder:ot.a},mixins:[at],props:{panel:Object},data:function(t){return{page:{},confirm:(0,t.$t)("The changes you made will be lost if you navigate away from this page.")}},created:function(){this.Builder.prefix="page#",this.Builder.$on("change",this.load)},methods:{load:function(t){if(this.Builder.modified||this.page.modified){var e=$t({},this.page,{content:t});this.$trigger("loadPreview",this.Builder.modified?{page:e}:{})}},save:function(t,e){var i=this;void 0===t&&(t=this.Builder.node),void 0===e&&(e=!1),this.$refs.notifications.dismiss(),this.$trigger("replaceImages",t,!0).then(function(){var a=Object(p.d)(JSON.stringify($t({},i.page,{content:t})));t=i.Builder.clone(t),i.$http.post("page",{page:a,overwrite:e}).then(function(e){var a=e.body;a.collision?(i.page.collision=a.collision,i.$refs.notifications.dismiss(),i.$modal(_t,a).show().then(function(e){!0===e?i.save(t,!0):!1===e&&i.cancel()})):a.id===i.page.id&&(i.setMaxModifiedDate(a),i.Builder.base=t)})},function(){})},cancel:function(){this.$trigger("loadPreview",{})},empty:function(){this.Builder.set($t({},this.Builder.make("layout"),{children:[this.Builder.make("section")]}))},setMaxModifiedDate:function(t,e){var i=t.modifiedDate;void 0===e&&(e=this.page),e.modifiedDate=e.modifiedDate>i?e.modifiedDate:i}},events:{readyPreview:function(t,e){var i=e.window.$customizer,a=(void 0===i?{}:i).page,n=void 0===a?{}:a;n.id===this.page.id&&this.setMaxModifiedDate(this.page,n),this.page=n,n.modified||this.Builder.reset(n.content||{})},beforeunloadPreview:function(t,e){var i=e.event;this.Builder.modified&&(i.preventDefault(),i.returnValue=!0)},closePanel:function(t,e,i){var a=(void 0===i?{}:i).name;this.Builder.modified&&"builder"===a&&(window.confirm(this.confirm)?this.Builder.reset():e.close=!1)},close:function(){if(this.Builder.modified)return window.confirm(this.confirm)}}},xt=Object(o.a)(Ct,dt,[],!1,null,null,null);xt.options.__file="node_modules/yootheme/modules/builder/app/components/BuilderSection.vue";var Ot=xt.exports,jt=i(247),Bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"uk-modal-header"},[i("h2",{staticClass:"uk-modal-title"},[t._v(t._s(t.$t("Layout Media Files")))])]),t._v(" "),i("div",{staticClass:"uk-modal-body"},[t.error.length?i("div",{staticClass:"uk-alert-danger uk-alert",attrs:{"uk-alert":""}},[t._v(t._s(t.$t("%smart_count% media file download failed: |||| %smart_count% media file downloads failed:",t.error.length))+" "+t._s(t.error[0]))]):t._e(),t._v(" "),t.loading?i("progress",{staticClass:"uk-progress uk-margin-remove",attrs:{max:t.total},domProps:{value:t.total-t.images.length}}):t._e(),t._v(" "),i("p",[t._v(t._s(t.$t("This layout includes a media file which needs to be downloaded to your website's media library. |||| This layout includes %smart_count% media files which need to be downloaded to your website's media library.",t.images.length)))]),t._v(" "),i("p",{domProps:{innerHTML:t._s(t.$t("All images are licensed under <a href='http://creativecommons.org/publicdomain/zero/1.0/' target='_blank'>Creative Commons Zero</a> which means you can copy, modify, distribute and use the images for free, including commercial purposes, without asking permission."))}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"uk-modal-footer uk-text-right"},[i("button",{staticClass:"uk-button uk-button-default uk-margin-small-right",attrs:{type:"button"},on:{click:function(e){return t.next()}}},[t._v(t._s(t.$t("Remove Media Files")))]),t._v(" "),i("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"button"},on:{click:function(e){return t.next("Download")}}},[t._v(t._s(t.$t("Download")))])])])};Bt._withStripped=!0;var Nt=i(225);function Lt(){return(Lt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}var Et={config:["api","assets","url"],props:{images:{type:Array,required:!0}},data:function(t){return{error:[],loading:!1,total:t.images.length}},methods:{next:function(t){var e=this;this.error=[],this.total=this.images.length,this.loading=!0,t?Promise.all(this.images.map(function(t){return Promise.all(t.src.map(function(i){var a=i.src,n=i.md5,r=a.match(/images\.unsplash\.com.*[?\/&]id=(\w+)/);return r&&e.$http.post(e.$config.api+"/v1",JSON.stringify({query:Pt,variables:{id:r[1]}}),{headers:{"Content-Type":"text/plain"}}),e.$http.post("builder/image",{src:a,md5:n}).then(function(e){var i=e.data;t.replace(a,i)})})).then(function(){e.images.splice(e.images.indexOf(t),1)},function(t){var i=t.data;return e.error.push(i),Promise.resolve()})})).then(function(){e.images.length?e.loading=!1:e.close()}):(this.images.forEach(function(t){return t.src.forEach(function(i){var a=i.src;return t.replace(a,e.$url(e.$config.assets+"/images/element-image-placeholder.png").slice(e.$config.url.length+1))})}),this.close())},close:function(){this.$emit("resolve",!0)}}},Pt="query ($id: String!) {\n                                unsplashDownload (id: $id)\n                            }";var St=Et,Dt=Object(o.a)(St,Bt,[],!1,null,null,null);Dt.options.__file="node_modules/yootheme/modules/builder/app/components/DownloadModal.vue";var Mt=Dt.exports,At=i(260),Ft=i(5),Tt=i(138);a.a.merge("Customizer",{components:{builder:Ot,"footer-builder":ct},models:{Library:Y},events:{readyPreview:function(t,e){var i=e.document;this.document=i},hoverNode:function(t,e,i){Object(Q.addClass)(zt(e,i,this.document),"yo-hover")},leaveNode:function(t,e,i){Object(Q.removeClass)(zt(e,i,this.document),"yo-hover")},editNode:function(t,e,i){var a=this,n=Object(At.a)(i.type(e),["title","width","fields","fieldset","panels"]);Object(F.a)(e.props)&&!Object(Ft.a)(e.props)||this.$set(e,"props",{}),"name"in e.props==!1&&Object.defineProperty(e.props,"name",{get:function(){return e.name},set:function(t){return a.$set(e,"name",t)}}),this.$trigger("openPanel",Object(Tt.a)(n,{name:"node-"+i.key(e),props:{node:e,builder:i,values:e.props},heading:!1,component:qt}))},initBuilder:function(t,e){e=Object(Tt.a)(e,window.$builder.elements)},replaceImages:function(t,e){var i=function t(e){return Object(Nt.a)(e,function(i,a,n){return i.concat(a instanceof p.b?Lt({replace:function(t,i){return e[n]=e[n].split(t).join(i||"")}},a):Object(F.a)(a)?t(a):[])},[])}(e);return i.length?this.$modal(Mt,{images:i}).show({id:"DownloadModal",width:"xlarge"}).then(function(t){return t||Promise.reject()}):Promise.resolve()}}});var qt={name:"BuilderPanel",extends:jt.a,provide:function(){return{$node:this.node,Builder:this.builder}},props:{node:Object,builder:Object},events:{resetNode:function(){this.$trigger("closePanel")}}};function zt(t,e,i){var a=e.ids.indexOf(t);return~a&&i&&Object(Q.$)('[data-id="'+e.prefix+a+'"]',i)}},7:function(t,e){t.exports=UIkit}},[[211,1,0]]]);